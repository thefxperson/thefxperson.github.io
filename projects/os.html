<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Parker Carlson</title>

  <!-- Bootstrap core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


  <!-- Custom fonts for this template -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.css">


  <!-- Custom styles for this template -->
  <link href="../css/resume.css" rel="stylesheet">

</head>

<body id="page-top">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" id="sideNav">
    <a class="navbar-brand" href="#page-top">
      <span class="d-block d-lg-none">Parker Carlson</span>
      <span class="d-none d-lg-block">
        <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="../img/headshot.png" alt="">
      </span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../experience.html">Experience</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../research.html">Research</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="../projects.html">Projects</a>
        </li>
      </ul>
    </div>
</nav>

  <div class="container-fluid p-0">
    <section class="resume-section p-3 p-lg-5 d-flex justify-content-center">
      <div class="w-100">
        <p><a class="back mb-4" href="../projects.html"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Projects</a></p>


        <h3>UNIX-like Operating System</h3>
        <p><i>Parker Carlson | 08 Feb. 2023</i></p>
        <p>For OSU's CS444: Operating Systems II class, I built a basic Unix-like kernel and operating system. This follows MIT's JOS curriculum, with some tweaks inspiried by UW and Georgia Tech. In this post, I'll break down the core aspects of this operating system, as well as key code snippets.</p>
        <br>

        <h4>The Bootloader</h4>
        <p><i>Note: Code for the bootloader and the kernel's boot functionality was provided. In this section I provide a brief technical overview of the bootloading process.</i></p>
        <p>When they first boot, x86 CPUs load 512 bytes from <code>0x7c00</code> to <code>0x7dff</code> into memory, then <code>jmp</code> to <code>0x7c00</code>, transferring control to the user. In these 512 bytes, we switch into 32-bit protected mode (allowing access to more than 1MB of RAM via paging), call a C function which loads the kernel into memory from an ELF binary, and then transfers execution to the kernel.</p>
        <p>Once in the kernel, we begin execution in Assembly again. First, we load a static page directory and page table with two pages: one mapping from kernel addresses to physical addresses (<code>[KERNBASE, KERNBASE+4MB)</code> -> <code>[0,4MB)</code>), as well as an identity page mapping (<code>[0,4MB)</code> -> <code>[0,4MB)</code>). This identity mapping allows us to continue running Assembly instructions after loading the page directory/page table until we can <code>jmp</code> to C code, which is linked to run at <code>KERNBASE</code> (<code>0xf0000000</code>). Kernels are often designed to run at high virtual memory addresses to avoid potential memory collisions with user environments.</p>
        <p>Finally, we are in the Kernel and running in C. We finish loading the ELF binary by setting the BSS memory to zero, and initialize the console. For the first lab, I implemented <code>mon_backtrace()</code>, a console command which provides a stack backtrace. This begins with the currently running function (again, <code>mon_backtrace()</code>) and prints the stack frame of every function call until the stack base pointer <code>%EBP</code> is 0, representing the end of the stack.</p>

        <p><i>Key Files:</i></p>
<pre><code>boot/boot.S   # initial entry point, switch to protected mode, call boot/main.c
boot/main.c     # load the kernel from ELF, transfer control to kern/entry.S
kern/entry.S    # load static pagedir, enable virtual memory and transfer control to kern/init.c
kern/init.c     # finish ELF loading, initialize the console, handle errors
kern/monitor.c  # various console functions, including mon_backtrace() at line 72
</code></pre>
        <p><a href="https://github.com/thefxperson/JOS/tree/lab1" target="_blank" rel="noreferrer noopener">[Code]</a></p>
        <br>

        <h4>Virtual Memory & Paging</h4>
        <p>Technical details coming soon...</p>
        <p><a href="https://github.com/thefxperson/JOS/tree/lab2" target="_blank" rel="noreferrer noopener">[Code]</a></p>
        <br>

        <h4>User Environments</h4>
        <p>Technical details coming soon...</p>
        <p><a href="https://github.com/thefxperson/JOS/tree/lab3" target="_blank" rel="noreferrer noopener">[Code]</a></p>
        <br>

        <h4>Multitasking & Scheduling</h4>
        <p>Technical details coming soon...</p>
        <p><a href="https://github.com/thefxperson/JOS/tree/lab4" target="_blank" rel="noreferrer noopener">[Code]</a></p>
      </div>
    </section>
  </div>

</body>
</html>
